window.addEventListener('load',function(){initAccordion()});function toggleContent(e){let block=e.target.closest('.faq-card__inner');let content=block.querySelector('.faq-card__wrap-content');block.querySelector('.faq-card__btn').classList.toggle('faq-card__btn_show');const isShow=()=>{return+window.getComputedStyle(content).maxHeight.replace('px','')};if(isShow()===0){content.style.maxHeight=content.scrollHeight+'px'}else{content.style.maxHeight=0+'px'}}
function initAccordion(){let faq=document.querySelector('#faq');let list=faq.querySelectorAll('.faq-section__container_desktop .faq-section__list');let cards1=list[0].querySelectorAll('.faq-card');let cards2=list[1].querySelectorAll('.faq-card');cards1.forEach((element,idx)=>{let headerCol1=element.querySelector('.faq-card__header');let headerCol2=cards2[idx].querySelector('.faq-card__header');let h1=window.getComputedStyle(headerCol1).height.replace('px','');let h2=window.getComputedStyle(headerCol2).height.replace('px','');if(h1>h2){headerCol1.style.height=h2+'px'}else if(h1<h2){headerCol2.style.height=h1+'px'}});function addClick(){let titleList=faq.querySelectorAll('div.faq-card__title');let plusBtns=faq.querySelectorAll('button.faq-card__btn');titleList.forEach((element)=>{element.setAttribute('onclick','toggleContent(event)')});plusBtns.forEach((element)=>{element.setAttribute('onclick','toggleContent(event)')})}
addClick()}
initCalculateValues();function initCalculateValues(){let inputs=document.querySelectorAll('.calculator__input');if(inputs.length>0){for(input of inputs){outputUpdate(input)}}}
function outputUpdate(input){let card=input.closest('.calculator__card-range');let id=input.getAttribute('id');let output=card.querySelector('.calculator__output');let outputValue=output.querySelector('span');let start=card.querySelector('.calculator__range-value_start');let finish=card.querySelector('.calculator__range-value_finish');let value=input.value;let left;outputValue.textContent=value;valuesOnSides();function valuesOnSides(){let first,second,divider1,divider2,divider3;if(id==='tree-count-input'){first=250;second=2200;divider1=9.75;divider2=10;divider3=10.3;if(value<first){start.style.opacity=0;finish.style.opacity=1;left=value/divider1}else if(value>=first&&value<second){start.style.opacity=1;finish.style.opacity=1;left=value/divider2}else{start.style.opacity=1;finish.style.opacity=0;left=value/divider3}
output.style.left=left+'px'}else if(id==='oil-price-input'){if(value==0){left=0;start.style.opacity=0;finish.style.opacity=1}else if(value==1){left=12;start.style.opacity=1;finish.style.opacity=1}else if(value==2){left=21;start.style.opacity=1;finish.style.opacity=1}else if(value==3){left=30;start.style.opacity=1;finish.style.opacity=1}else if(value==4){left=39;start.style.opacity=1;finish.style.opacity=1}else if(value==5){left=48;start.style.opacity=1;finish.style.opacity=1}else if(value==6){left=57;start.style.opacity=1;finish.style.opacity=1}else if(value==7){left=67;start.style.opacity=1;finish.style.opacity=1}else if(value==8){left=76;start.style.opacity=1;finish.style.opacity=1}else if(value==9){left=85;start.style.opacity=1;finish.style.opacity=1}else if(value==10){left=95;start.style.opacity=1;finish.style.opacity=0}
output.style.left=left+'%'}else if(id==='productivity-input'){if(value<25){start.style.opacity=0;finish.style.opacity=1;left=value/0.588}else if(value>=25&&value<175){start.style.opacity=1;finish.style.opacity=1;left=value/0.644}else{start.style.opacity=1;finish.style.opacity=0;left=value/0.651}
output.style.left=left+'px'}}
let parent=input.closest('.income-calculator');calculateInvest(parent)}
function calculateInvest(parent){let countTree=parent.querySelector('#tree-count-input').value;let priceTree=118;let totalInvest=countTree*priceTree;let totalBlock=document.querySelector('[data-num="investment-size"]');totalBlock.textContent=totalInvest.toLocaleString('ru-RU');let priceOil=parent.querySelector('#oil-price-input').value;let priceOilDesc=document.querySelector('[data-num="oil-price"]');priceOilDesc.textContent=((+priceOil).toFixed(1)).replace('.',',');let productivity=parent.querySelector('#productivity-input').value;let productivityDesc=parent.querySelector('[data-num="productivity"]');productivityDesc.textContent=productivity;let cards=parent.querySelectorAll('li.expected-income__card');let nloAdditional={y4:4,y5:4.8,y6:5.4,y7:6,y8:6.8,y9:8,y10:9.6,};let income10Years=0;let percentage10Years=0;cards.forEach((el,idx)=>{if(3<=idx){let afterSale=incomeAfterSale(priceOil,idx);let expectedIncome=(countTree*afterSale).toFixed(0);let expectedPercentage=expectedPercentageFunc(expectedIncome);income10Years=(income10Years*100+ +expectedIncome*100)/100;percentage10Years=(percentage10Years*100+ +expectedPercentage*100)/100;el.querySelector('[data-num="expected-income"]').textContent=expectedIncome.toLocaleString('ru-RU');el.querySelector('[data-num="expected-percentage"]').textContent=(+expectedPercentage).toLocaleString('ru-RU')}});parent.querySelector('[data-num="average-income"]').textContent=(Math.round(income10Years/10).toLocaleString('ru-RU'));parent.querySelector('[data-num="average-percentage"]').textContent=(Math.round((percentage10Years/10)*10)/10).toLocaleString('ru-RU');parent.querySelector('[data-num="income-first-years"]').textContent=income10Years.toLocaleString('ru-RU')
parent.querySelector('[data-num="percentage-first-years"]').textContent=percentage10Years.toLocaleString('ru-RU')
function incomeAfterSale(priceOil,idx){if(idx+1===10){return Math.round(((priceOil*nloAdditional['y'+(idx+1)])/80*productivity)*1000)/1000}else{return Math.round(priceOil*nloAdditional['y'+(idx+1)]*1000)/1000}}
function expectedPercentageFunc(income){let total=totalInvest;let res=((income/total)*100).toFixed(1);return res}}
const installMenu=()=>{let btn=document.querySelector('#menu-btn');btn.addEventListener('click',openMenu);let ground=document.querySelector('#menu-ground');ground.addEventListener('click',openMenu);let links=document.querySelectorAll('a.dropdown-menu__link');for(let link of links){link.addEventListener('click',openMenu)}}
function openMenu(){console.log('click');let menu=document.querySelector('.dropdown-menu');let ground=document.querySelector('#menu-ground');let btn=document.querySelector('#menu-btn');let body=document.querySelector('body');btn.classList.toggle('menu__btn_open');ground.classList.toggle('header__ground_hide');let visible=menu.getAttribute('data-visible');if(visible==='hide'){menu.setAttribute('data-visible','show')}else{menu.setAttribute('data-visible','hide')}}
installMenu();initModal();function initModal(){let btns=document.querySelectorAll('.calculate-card__btn');if(btns.length>0){for(let btn of btns){btn.setAttribute('onclick','openModal(this)')}}
let closeGrounds=document.querySelectorAll('.modal__overlay');if(closeGrounds.length>0){for(let closeGround of closeGrounds){closeGround.setAttribute('onclick','closeModal(event)')}}}
function getScrollWidth(){let div=document.createElement('div');div.style.overflowY='scroll';div.style.width='50px';div.style.height='50px';div.style.opacity='0';document.body.append(div);let scrollWidth=div.offsetWidth-div.clientWidth;div.remove();return scrollWidth}
function openModal(btn){let modal=document.querySelector('#modal-invest');if(modal){document.querySelector('body').style.paddingRight=getScrollWidth()+'px';document.querySelector('body').style.overflow='hidden';modal.classList.toggle('modal_open');document.querySelector('.modal__overlay').style.overflowY='scroll'}}
function closeModal(e){if(!e.target.closest('.window-modal')||e.target.classList.contains('window-modal__close')){document.querySelector('body').style.paddingRight='0px';e.target.closest('.modal__overlay').style.overflowY='hidden';document.querySelector('body').style.overflow='auto';let modal=e.target.closest('.modal');modal.classList.toggle('modal_open')}}
const installClick=()=>{const smoothLinks=document.querySelectorAll('a[href^="#"]');for(let link of smoothLinks){if(link.getAttribute('href').length>1){link.setAttribute('onclick','scrollToSection(event)')}}};const scrollToSection=(e)=>{e.preventDefault();const id=e.target.getAttribute('href');document.querySelector(id).scrollIntoView({behavior:'smooth',block:'start',})};installClick()